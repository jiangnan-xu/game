<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Memory Door Â· Level 33</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Shippori+Mincho:wght@500;700&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

<style>
:root{
  --title-font: "Shippori Mincho", serif;
  --ui-font: "Inter", "Zen Maru Gothic", system-ui, sans-serif;
}

/* ================== BASE ================== */
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:var(--ui-font);
}

/* ================== INTRO ================== */
#intro{
  position:fixed;
  inset:0;
  background:#000;
}

/* ---------- Title ---------- */
#title-layer{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  color:#fff;
  z-index:3;
  pointer-events:none;
  transition:opacity .4s ease;
  background:
    radial-gradient(circle at 50% 35%, rgba(255,255,255,.12), rgba(0,0,0,.9) 65%);
}

.title-wrap{ max-width:760px; padding:24px; }

.kicker{
  letter-spacing:.35em;
  font-size:12px;
  opacity:.75;
  margin-bottom:16px;
}

.title{
  font-family:var(--title-font);
  font-size:clamp(44px,6vw,68px);
  font-weight:700;
  line-height:1.05;
  text-shadow:0 20px 80px rgba(0,0,0,.8);
}

.subtitle{
  margin-top:14px;
  font-size:14px;
  opacity:.8;
}

/* Scroll indicator */
.scroll{
  margin-top:26px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  opacity:.9;
}
.scroll-mouse{
  width:22px;height:34px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.45);
  position:relative;
}
.scroll-mouse::after{
  content:"";
  position:absolute;
  left:50%;top:6px;
  width:3px;height:6px;
  border-radius:999px;
  background:#fff;
  transform:translateX(-50%);
  animation:wheel 1.2s infinite;
}
@keyframes wheel{
  0%{opacity:.2;transform:translate(-50%,0)}
  50%{opacity:1}
  100%{opacity:.2;transform:translate(-50%,10px)}
}

/* ================== SCENE ================== */
#scene{
  position:absolute;
  inset:0;
  opacity:0;
  transition:opacity .5s ease;
}

#scene-img{
  width:100%;
  height:100%;
  object-fit:cover;
  transform-origin:50% 50%;
  will-change:transform;
}

/* ================== HOTSPOTS ================== */
.hotspot{
  position:absolute;
  border:none;
  background:transparent;
  cursor:pointer;
  z-index:4;
}

/* Door */
#door-hotspot{
  left:34%;
  top:18%;
  width:28%;
  height:66%;
}

/* Bell â€“ visible + pulsing */
#bell-hotspot{
  left:56%;
  top:43%;
  width:9%;
  height:14%;
  border-radius:16px;
  background:radial-gradient(circle at 40% 35%,
    rgba(255,255,255,.35),
    rgba(255,255,255,.08) 55%,
    rgba(255,255,255,0) 70%);
  animation:bellPulse 1.6s ease-in-out infinite;
}
@keyframes bellPulse{
  0%{box-shadow:0 0 0 0 rgba(255,210,140,0)}
  50%{box-shadow:0 0 28px 6px rgba(255,210,140,.28)}
  100%{box-shadow:0 0 0 0 rgba(255,210,140,0)}
}

/* ================== LOCK (ON DOOR) ================== */
#door-lock{
  position:absolute;
  left:50%;
  top:38%;
  transform:translate(-50%,-50%);
  width:min(440px,92vw);
  background:rgba(255,255,255,.9);
  border-radius:18px;
  padding:14px;
  display:none;
  z-index:6;
  box-shadow:0 30px 90px rgba(0,0,0,.45);
  backdrop-filter:blur(10px);
}

#door-lock.show{ display:block; }

.lock-title{
  font-family:"Zen Maru Gothic";
  font-weight:700;
  font-size:16px;
  margin-bottom:6px;
}

.lock-sub{ font-size:13px; opacity:.8; }

.lock-wheels{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:12px 0;
}

.wheel{
  width:52px;height:78px;
  border-radius:14px;
  background:linear-gradient(#eef2ff,#dbeafe);
  border:1px solid #bfdbfe;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:"Zen Maru Gothic";
  font-size:26px;
  font-weight:800;
  cursor:grab;
}

.unlock-btn{
  margin-top:6px;
  width:100%;
  padding:10px;
  border-radius:999px;
  border:none;
  font-weight:800;
  cursor:pointer;
  background:linear-gradient(135deg,#fde68a,#fb923c);
}

.hint-message{
  margin-top:8px;
  color:#b91c1c;
  font-weight:700;
  min-height:18px;
}

/* ================== TOAST ================== */
#toast{
  position:absolute;
  left:50%;
  bottom:32px;
  transform:translateX(-50%);
  padding:10px 14px;
  background:rgba(0,0,0,.6);
  color:#fff;
  border-radius:999px;
  font-size:14px;
  opacity:0;
  transition:.2s;
  z-index:7;
}
#toast.show{ opacity:1; transform:translate(-50%,-6px); }
</style>
</head>

<body>

<div id="intro">

  <div id="title-layer">
    <div class="title-wrap">
      <div class="kicker">LEVEL 33</div>
      <div class="title">Memory Door</div>
      <div class="subtitle">Scroll to approach.</div>
      <div class="scroll">
        <div class="scroll-mouse"></div>
      </div>
    </div>
  </div>

  <div id="scene">
    <img id="scene-img" src="door-bg.jpg" />

    <button id="door-hotspot" class="hotspot"></button>
    <button id="bell-hotspot" class="hotspot"></button>

    <div id="door-lock">
      <div class="lock-title">Itâ€™s locked.</div>
      <div class="lock-sub">Enter the first code.</div>
      <div class="lock-wheels" id="lock-wheels"></div>
      <button class="unlock-btn" id="unlock-btn">Unlock</button>
      <div class="hint-message" id="hint-message"></div>
    </div>

    <div id="toast"></div>
  </div>
</div>

<audio id="song" src="song.m4a" preload="auto"></audio>

<script>
/* ================= CONFIG ================= */
const CODE = "MEMORY";   // change freely
const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
const DOOR_FOCUS = { x:0.44, y:0.52 };
const ZOOM_MAX = 2.6;

/* ================= STATE ================= */
let progress = 0;
let lockOpen = false;

/* ================= ELEMENTS ================= */
const scene = document.getElementById("scene");
const titleLayer = document.getElementById("title-layer");
const img = document.getElementById("scene-img");
const door = document.getElementById("door-hotspot");
const bell = document.getElementById("bell-hotspot");
const lock = document.getElementById("door-lock");
const toast = document.getElementById("toast");
const song = document.getElementById("song");

/* ================= CAMERA ================= */
function applyCamera(){
  const show = Math.min(1, Math.max(0,(progress-.1)/.3));
  scene.style.opacity = show;
  titleLayer.style.opacity = 1-show;

  const t = Math.min(1, Math.max(0,progress));
  const zoom = 1 + (ZOOM_MAX-1)*t*t;

  const dx = (0.5-DOOR_FOCUS.x)*window.innerWidth*(zoom-1);
  const dy = (0.5-DOOR_FOCUS.y)*window.innerHeight*(zoom-1);

  img.style.transform = `translate(${dx}px,${dy}px) scale(${zoom})`;
}

window.addEventListener("wheel",e=>{
  if(lockOpen) return;
  e.preventDefault();
  progress = Math.max(0,Math.min(1,progress - e.deltaY*0.0007));
  applyCamera();
},{passive:false});

applyCamera();

/* ================= UI ================= */
function showToast(msg){
  toast.textContent = msg;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),900);
}

bell.onclick = ()=>{
  showToast("ðŸ”” Ding...");
  song.currentTime = 0;
  song.play().catch(()=>{});
};

door.onclick = ()=>{
  showToast("The door is closed.");
  lock.style.display = "block";
  lockOpen = true;
};

/* ================= LOCK ================= */
const wheels = [];
const container = document.getElementById("lock-wheels");
for(let i=0;i<CODE.length;i++){
  let pos = 0;
  const w = document.createElement("div");
  w.className="wheel";
  w.textContent = letters[pos];
  w.onwheel = e=>{
    e.preventDefault();
    pos = (pos + (e.deltaY>0?-1:1)+26)%26;
    w.textContent = letters[pos];
    wheels[i]=letters[pos];
  };
  container.appendChild(w);
  wheels.push(letters[pos]);
}

document.getElementById("unlock-btn").onclick = ()=>{
  if(wheels.join("")===CODE){
    showToast("Unlocked.");
    lock.style.display="none";
    lockOpen=false;
  }else{
    document.getElementById("hint-message").textContent="Not quiteâ€¦";
  }
};
</script>

</body>
</html>
